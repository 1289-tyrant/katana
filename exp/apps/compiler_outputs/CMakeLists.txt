if(USE_GGC)
  # for debugging 
  if(CMAKE_BUILD_TYPE MATCHES "Debug")
    add_definitions(-D__GALOIS_CUDA_CHECK_ERROR__)
    set(CUDA_NVCC_FLAGS ${CUDA_NVCC_FLAGS}; -lineinfo)

    add_definitions(-D__GALOIS_DEBUG_WORKLIST__)
  endif()
endif()

#if(CMAKE_BUILD_TYPE MATCHES "Debug")
  #add_definitions(-D__GALOIS_SIMULATE_COMMUNICATION__)
  #add_definitions(-D__GALOIS_SIMULATE_COMMUNICATION_WITH_GRAPH_DATA__)
  #add_definitions(-D__GALOIS_SIMULATE_BARE_MPI_COMMUNICATION__)
#endif()

app(pagerank_push-topological pagerank_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_push-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-topological pagerank_push-topological_cuda galois_exp)
  cuda_add_library(pagerank_push-topological_cuda pagerank_push-topological/gen_cuda.cu)
  target_link_libraries(pagerank_push-topological_cuda ggrt)
endif()

app(pagerank_push-worklist pagerank_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_push-worklist PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-worklist pagerank_push-worklist_cuda galois_exp)
  cuda_add_library(pagerank_push-worklist_cuda pagerank_push-worklist/gen_cuda.cu)
  target_link_libraries(pagerank_push-worklist_cuda ggrt)
endif()

app(pagerank_push-filter pagerank_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_push-filter PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-filter pagerank_push-filter_cuda galois_exp)
  cuda_add_library(pagerank_push-filter_cuda pagerank_push-filter/gen_cuda.cu)
  target_link_libraries(pagerank_push-filter_cuda ggrt)
endif()

app(pagerank_pull-topological pagerank_pull-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_pull-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_pull-topological pagerank_pull-topological_cuda galois_exp)
  cuda_add_library(pagerank_pull-topological_cuda pagerank_pull-topological/gen_cuda.cu)
  target_link_libraries(pagerank_pull-topological_cuda ggrt)
endif()

app(pagerank_pull-topological-split pagerank_pull-topological-split/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_pull-topological-split PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_pull-topological-split pagerank_pull-topological-split_cuda galois_exp)
  cuda_add_library(pagerank_pull-topological-split_cuda pagerank_pull-topological-split/gen_cuda.cu)
  target_link_libraries(pagerank_pull-topological-split_cuda ggrt)
endif()

app(sssp_push-topological sssp_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_push-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-topological sssp_push-topological_cuda galois_exp)
  cuda_add_library(sssp_push-topological_cuda sssp_push-topological/gen_cuda.cu)
  target_link_libraries(sssp_push-topological_cuda ggrt)
endif()

app(sssp_push-worklist sssp_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_push-worklist PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-worklist sssp_push-worklist_cuda galois_exp)
  cuda_add_library(sssp_push-worklist_cuda sssp_push-worklist/gen_cuda.cu)
  target_link_libraries(sssp_push-worklist_cuda ggrt)
endif()

app(sssp_pull-topological sssp_pull-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_pull-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_pull-topological sssp_pull-topological_cuda galois_exp)
  cuda_add_library(sssp_pull-topological_cuda sssp_pull-topological/gen_cuda.cu)
  target_link_libraries(sssp_pull-topological_cuda ggrt)
endif()

app(sssp_push-filter sssp_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_push-filter PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-filter sssp_push-filter_cuda galois_exp)
  cuda_add_library(sssp_push-filter_cuda sssp_push-filter/gen_cuda.cu)
  target_link_libraries(sssp_push-filter_cuda ggrt)
endif()

app(bfs_push-topological bfs_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_push-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-topological bfs_push-topological_cuda galois_exp)
  cuda_add_library(bfs_push-topological_cuda bfs_push-topological/gen_cuda.cu)
  target_link_libraries(bfs_push-topological_cuda ggrt)
endif()

app(bfs_push-worklist bfs_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_push-worklist PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-worklist bfs_push-worklist_cuda galois_exp)
  cuda_add_library(bfs_push-worklist_cuda bfs_push-worklist/gen_cuda.cu)
  target_link_libraries(bfs_push-worklist_cuda ggrt)
endif()

app(bfs_push-filter bfs_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_push-filter PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-filter bfs_push-filter_cuda galois_exp)
  cuda_add_library(bfs_push-filter_cuda bfs_push-filter/gen_cuda.cu)
  target_link_libraries(bfs_push-filter_cuda ggrt)
endif()

app(bfs_pull-topological bfs_pull-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_pull-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_pull-topological bfs_pull-topological_cuda galois_exp)
  cuda_add_library(bfs_pull-topological_cuda bfs_pull-topological/gen_cuda.cu)
  target_link_libraries(bfs_pull-topological_cuda ggrt)
endif()

app(cc_push-topological cc_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_push-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-topological cc_push-topological_cuda galois_exp)
  cuda_add_library(cc_push-topological_cuda cc_push-topological/gen_cuda.cu)
  target_link_libraries(cc_push-topological_cuda ggrt)
endif()

app(cc_push-worklist cc_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_push-worklist PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-worklist cc_push-worklist_cuda galois_exp)
  cuda_add_library(cc_push-worklist_cuda cc_push-worklist/gen_cuda.cu)
  target_link_libraries(cc_push-worklist_cuda ggrt)
endif()

app(cc_push-filter cc_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_push-filter PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-filter cc_push-filter_cuda galois_exp)
  cuda_add_library(cc_push-filter_cuda cc_push-filter/gen_cuda.cu)
  target_link_libraries(cc_push-filter_cuda ggrt)
endif()

app(cc_pull-topological cc_pull-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_pull-topological PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_pull-topological cc_pull-topological_cuda galois_exp)
  cuda_add_library(cc_pull-topological_cuda cc_pull-topological/gen_cuda.cu)
  target_link_libraries(cc_pull-topological_cuda ggrt)
endif()

app(pagerank_push-topological_irgl-unopt irgl-unopt/pagerank_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_push-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_push-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-topological_irgl-unopt pagerank_push-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(pagerank_push-topological_irgl-unopt_cuda irgl-unopt/pagerank_push-topological/gen_cuda.cu)
  target_link_libraries(pagerank_push-topological_irgl-unopt_cuda ggrt)
endif()

app(pagerank_push-worklist_irgl-unopt irgl-unopt/pagerank_push-worklist/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_push-worklist_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_push-worklist_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-worklist_irgl-unopt pagerank_push-worklist_irgl-unopt_cuda galois_exp)
  cuda_add_library(pagerank_push-worklist_irgl-unopt_cuda irgl-unopt/pagerank_push-worklist/gen_cuda.cu)
  target_link_libraries(pagerank_push-worklist_irgl-unopt_cuda ggrt)
endif()

app(pagerank_push-filter_irgl-unopt irgl-unopt/pagerank_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_push-filter_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_push-filter_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-filter_irgl-unopt pagerank_push-filter_irgl-unopt_cuda galois_exp)
  cuda_add_library(pagerank_push-filter_irgl-unopt_cuda irgl-unopt/pagerank_push-filter/gen_cuda.cu)
  target_link_libraries(pagerank_push-filter_irgl-unopt_cuda ggrt)
endif()

app(pagerank_pull-topological_irgl-unopt irgl-unopt/pagerank_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_pull-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_pull-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_pull-topological_irgl-unopt pagerank_pull-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(pagerank_pull-topological_irgl-unopt_cuda irgl-unopt/pagerank_pull-topological/gen_cuda.cu)
  target_link_libraries(pagerank_pull-topological_irgl-unopt_cuda ggrt)
endif()

app(pagerank_pull-topological-split_irgl-unopt irgl-unopt/pagerank_pull-topological-split/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_pull-topological-split_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_pull-topological-split_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_pull-topological-split_irgl-unopt pagerank_pull-topological-split_irgl-unopt_cuda galois_exp)
  cuda_add_library(pagerank_pull-topological-split_irgl-unopt_cuda irgl-unopt/pagerank_pull-topological-split/gen_cuda.cu)
  target_link_libraries(pagerank_pull-topological-split_irgl-unopt_cuda ggrt)
endif()

app(sssp_push-topological_irgl-unopt irgl-unopt/sssp_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(sssp_push-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(sssp_push-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-topological_irgl-unopt sssp_push-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(sssp_push-topological_irgl-unopt_cuda irgl-unopt/sssp_push-topological/gen_cuda.cu)
  target_link_libraries(sssp_push-topological_irgl-unopt_cuda ggrt)
endif()

app(sssp_push-worklist_irgl-unopt irgl-unopt/sssp_push-worklist/gen.cpp DISTSAFE)
target_compile_definitions(sssp_push-worklist_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(sssp_push-worklist_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-worklist_irgl-unopt sssp_push-worklist_irgl-unopt_cuda galois_exp)
  cuda_add_library(sssp_push-worklist_irgl-unopt_cuda irgl-unopt/sssp_push-worklist/gen_cuda.cu)
  target_link_libraries(sssp_push-worklist_irgl-unopt_cuda ggrt)
endif()

app(sssp_pull-topological_irgl-unopt irgl-unopt/sssp_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(sssp_pull-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(sssp_pull-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_pull-topological_irgl-unopt sssp_pull-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(sssp_pull-topological_irgl-unopt_cuda irgl-unopt/sssp_pull-topological/gen_cuda.cu)
  target_link_libraries(sssp_pull-topological_irgl-unopt_cuda ggrt)
endif()

app(sssp_push-filter_irgl-unopt irgl-unopt/sssp_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(sssp_push-filter_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(sssp_push-filter_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-filter_irgl-unopt sssp_push-filter_irgl-unopt_cuda galois_exp)
  cuda_add_library(sssp_push-filter_irgl-unopt_cuda irgl-unopt/sssp_push-filter/gen_cuda.cu)
  target_link_libraries(sssp_push-filter_irgl-unopt_cuda ggrt)
endif()

app(bfs_push-topological_irgl-unopt irgl-unopt/bfs_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_push-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(bfs_push-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-topological_irgl-unopt bfs_push-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(bfs_push-topological_irgl-unopt_cuda irgl-unopt/bfs_push-topological/gen_cuda.cu)
  target_link_libraries(bfs_push-topological_irgl-unopt_cuda ggrt)
endif()

app(bfs_push-worklist_irgl-unopt irgl-unopt/bfs_push-worklist/gen.cpp DISTSAFE)
target_compile_definitions(bfs_push-worklist_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(bfs_push-worklist_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-worklist_irgl-unopt bfs_push-worklist_irgl-unopt_cuda galois_exp)
  cuda_add_library(bfs_push-worklist_irgl-unopt_cuda irgl-unopt/bfs_push-worklist/gen_cuda.cu)
  target_link_libraries(bfs_push-worklist_irgl-unopt_cuda ggrt)
endif()

app(bfs_push-filter_irgl-unopt irgl-unopt/bfs_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(bfs_push-filter_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(bfs_push-filter_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-filter_irgl-unopt bfs_push-filter_irgl-unopt_cuda galois_exp)
  cuda_add_library(bfs_push-filter_irgl-unopt_cuda irgl-unopt/bfs_push-filter/gen_cuda.cu)
  target_link_libraries(bfs_push-filter_irgl-unopt_cuda ggrt)
endif()

app(bfs_pull-topological_irgl-unopt irgl-unopt/bfs_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_pull-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(bfs_pull-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_pull-topological_irgl-unopt bfs_pull-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(bfs_pull-topological_irgl-unopt_cuda irgl-unopt/bfs_pull-topological/gen_cuda.cu)
  target_link_libraries(bfs_pull-topological_irgl-unopt_cuda ggrt)
endif()

app(cc_push-topological_irgl-unopt irgl-unopt/cc_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(cc_push-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(cc_push-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-topological_irgl-unopt cc_push-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(cc_push-topological_irgl-unopt_cuda irgl-unopt/cc_push-topological/gen_cuda.cu)
  target_link_libraries(cc_push-topological_irgl-unopt_cuda ggrt)
endif()

app(cc_push-worklist_irgl-unopt irgl-unopt/cc_push-worklist/gen.cpp DISTSAFE)
target_compile_definitions(cc_push-worklist_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(cc_push-worklist_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-worklist_irgl-unopt cc_push-worklist_irgl-unopt_cuda galois_exp)
  cuda_add_library(cc_push-worklist_irgl-unopt_cuda irgl-unopt/cc_push-worklist/gen_cuda.cu)
  target_link_libraries(cc_push-worklist_irgl-unopt_cuda ggrt)
endif()

app(cc_push-filter_irgl-unopt irgl-unopt/cc_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(cc_push-filter_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(cc_push-filter_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-filter_irgl-unopt cc_push-filter_irgl-unopt_cuda galois_exp)
  cuda_add_library(cc_push-filter_irgl-unopt_cuda irgl-unopt/cc_push-filter/gen_cuda.cu)
  target_link_libraries(cc_push-filter_irgl-unopt_cuda ggrt)
endif()

app(cc_pull-topological_irgl-unopt irgl-unopt/cc_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(cc_pull-topological_irgl-unopt PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
if(USE_GGC)
  target_compile_definitions(cc_pull-topological_irgl-unopt PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_pull-topological_irgl-unopt cc_pull-topological_irgl-unopt_cuda galois_exp)
  cuda_add_library(cc_pull-topological_irgl-unopt_cuda irgl-unopt/cc_pull-topological/gen_cuda.cu)
  target_link_libraries(cc_pull-topological_irgl-unopt_cuda ggrt)
endif()

app(bfs_push-filter_comm-updated-only comm-updated-only/bfs_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_push-filter_comm-updated-only PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-filter_comm-updated-only bfs_push-filter_comm-updated-only_cuda galois_exp)
  cuda_add_library(bfs_push-filter_comm-updated-only_cuda comm-updated-only/bfs_push-filter/gen_cuda.cu)
  target_link_libraries(bfs_push-filter_comm-updated-only_cuda ggrt)
endif()

#### CheckPointing ####
app(bfs_pull-topological_DiskCP checkpointing/bfs_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_pull-topological_DiskCP PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)

app(bfs_pull-topological_DiskCP_noFsync checkpointing/bfs_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_pull-topological_DiskCP_noFsync PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
target_compile_definitions(bfs_pull-topological_DiskCP_noFsync PRIVATE __CHECKPOINT_NO_FSYNC__=1)

app(bfs_pull-topological_DiskCP_tmpfs checkpointing/bfs_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_pull-topological_DiskCP_tmpfs PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
target_compile_definitions(bfs_pull-topological_DiskCP_tmpfs PRIVATE __TMPFS__=1)

app(bfs_pull-topological_DiskCP_tmpfs_noFsync checkpointing/bfs_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_pull-topological_DiskCP_tmpfs_noFsync PRIVATE __HETEROGENEOUS_GALOIS_DEPRECATED__=1)
target_compile_definitions(bfs_pull-topological_DiskCP_tmpfs_noFsync PRIVATE __TMPFS__=1 __CHECKPOINT__NO_FSYNC__=1)

