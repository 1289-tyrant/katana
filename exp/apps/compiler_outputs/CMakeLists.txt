if(USE_GGC)
  # for debugging 
  if(CMAKE_BUILD_TYPE MATCHES "Debug")
    add_definitions(-D__GALOIS_CUDA_CHECK_ERROR__)
    set(CUDA_NVCC_FLAGS ${CUDA_NVCC_FLAGS}; -lineinfo)

    add_definitions(-D__GALOIS_DEBUG_WORKLIST__)
  endif()
endif()

add_definitions(-D__GALOIS_SIMULATE_COMMUNICATION__)
add_definitions(-D__GALOIS_SIMULATE_COMMUNICATION_WITH_GRAPH_DATA__)
add_definitions(-D__GALOIS_SIMULATE_BARE_MPI_COMMUNICATION__)

app(pagerank_push-topological_edge-cut pagerank_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_push-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-topological_edge-cut pagerank_push-topological_edge-cut_cuda)
  cuda_add_library(pagerank_push-topological_edge-cut_cuda pagerank_push-topological/gen_cuda.cu)
  target_link_libraries(pagerank_push-topological_edge-cut_cuda ggrt)
endif()

app(pagerank_push-topological_vertex-cut pagerank_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_push-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_push-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-topological_vertex-cut pagerank_push-topological_vertex-cut_cuda)
  cuda_add_library(pagerank_push-topological_vertex-cut_cuda pagerank_push-topological/gen_cuda.cu)
  target_link_libraries(pagerank_push-topological_vertex-cut_cuda ggrt)
endif()

app(pagerank_push-worklist_edge-cut pagerank_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_push-worklist_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-worklist_edge-cut pagerank_push-worklist_edge-cut_cuda)
  cuda_add_library(pagerank_push-worklist_edge-cut_cuda pagerank_push-worklist/gen_cuda.cu)
  target_link_libraries(pagerank_push-worklist_edge-cut_cuda ggrt)
endif()

app(pagerank_push-filter_edge-cut pagerank_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_push-filter_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-filter_edge-cut pagerank_push-filter_edge-cut_cuda)
  cuda_add_library(pagerank_push-filter_edge-cut_cuda pagerank_push-filter/gen_cuda.cu)
  target_link_libraries(pagerank_push-filter_edge-cut_cuda ggrt)
endif()

app(pagerank_push-filter_vertex-cut pagerank_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_push-filter_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_push-filter_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_push-filter_vertex-cut pagerank_push-filter_vertex-cut_cuda)
  cuda_add_library(pagerank_push-filter_vertex-cut_cuda pagerank_push-filter/gen_cuda.cu)
  target_link_libraries(pagerank_push-filter_vertex-cut_cuda ggrt)
endif()

app(pagerank_pull-topological_edge-cut pagerank_pull-topological_edge-cut/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(pagerank_pull-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_pull-topological_edge-cut pagerank_pull-topological_edge-cut_cuda)
  cuda_add_library(pagerank_pull-topological_edge-cut_cuda pagerank_pull-topological_edge-cut/gen_cuda.cu)
  target_link_libraries(pagerank_pull-topological_edge-cut_cuda ggrt)
endif()

app(pagerank_pull-topological_vertex-cut pagerank_pull-topological_vertex-cut/gen.cpp DISTSAFE)
target_compile_definitions(pagerank_pull-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(pagerank_pull-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(pagerank_pull-topological_vertex-cut pagerank_pull-topological_vertex-cut_cuda)
  cuda_add_library(pagerank_pull-topological_vertex-cut_cuda pagerank_pull-topological_vertex-cut/gen_cuda.cu)
  target_link_libraries(pagerank_pull-topological_vertex-cut_cuda ggrt)
endif()

app(sssp_push-topological_edge-cut sssp_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_push-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-topological_edge-cut sssp_push-topological_edge-cut_cuda)
  cuda_add_library(sssp_push-topological_edge-cut_cuda sssp_push-topological/gen_cuda.cu)
  target_link_libraries(sssp_push-topological_edge-cut_cuda ggrt)
endif()

app(sssp_push-topological_vertex-cut sssp_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(sssp_push-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(sssp_push-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-topological_vertex-cut sssp_push-topological_vertex-cut_cuda)
  cuda_add_library(sssp_push-topological_vertex-cut_cuda sssp_push-topological/gen_cuda.cu)
  target_link_libraries(sssp_push-topological_vertex-cut_cuda ggrt)
endif()

app(sssp_push-worklist_edge-cut sssp_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_push-worklist_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-worklist_edge-cut sssp_push-worklist_edge-cut_cuda)
  cuda_add_library(sssp_push-worklist_edge-cut_cuda sssp_push-worklist/gen_cuda.cu)
  target_link_libraries(sssp_push-worklist_edge-cut_cuda ggrt)
endif()

app(sssp_pull-topological_edge-cut sssp_pull-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_pull-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_pull-topological_edge-cut sssp_pull-topological_edge-cut_cuda)
  cuda_add_library(sssp_pull-topological_edge-cut_cuda sssp_pull-topological/gen_cuda.cu)
  target_link_libraries(sssp_pull-topological_edge-cut_cuda ggrt)
endif()

app(sssp_pull-topological_vertex-cut sssp_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(sssp_pull-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(sssp_pull-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_pull-topological_vertex-cut sssp_pull-topological_vertex-cut_cuda)
  cuda_add_library(sssp_pull-topological_vertex-cut_cuda sssp_pull-topological/gen_cuda.cu)
  target_link_libraries(sssp_pull-topological_vertex-cut_cuda ggrt)
endif()

app(sssp_push-filter_edge-cut sssp_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(sssp_push-filter_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-filter_edge-cut sssp_push-filter_edge-cut_cuda)
  cuda_add_library(sssp_push-filter_edge-cut_cuda sssp_push-filter/gen_cuda.cu)
  target_link_libraries(sssp_push-filter_edge-cut_cuda ggrt)
endif()

app(sssp_push-filter_vertex-cut sssp_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(sssp_push-filter_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(sssp_push-filter_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(sssp_push-filter_vertex-cut sssp_push-filter_vertex-cut_cuda)
  cuda_add_library(sssp_push-filter_vertex-cut_cuda sssp_push-filter/gen_cuda.cu)
  target_link_libraries(sssp_push-filter_vertex-cut_cuda ggrt)
endif()

app(bfs_push-topological_edge-cut bfs_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_push-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-topological_edge-cut bfs_push-topological_edge-cut_cuda)
  cuda_add_library(bfs_push-topological_edge-cut_cuda bfs_push-topological/gen_cuda.cu)
  target_link_libraries(bfs_push-topological_edge-cut_cuda ggrt)
endif()

app(bfs_push-topological_vertex-cut bfs_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_push-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(bfs_push-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-topological_vertex-cut bfs_push-topological_vertex-cut_cuda)
  cuda_add_library(bfs_push-topological_vertex-cut_cuda bfs_push-topological/gen_cuda.cu)
  target_link_libraries(bfs_push-topological_vertex-cut_cuda ggrt)
endif()

app(bfs_push-worklist_edge-cut bfs_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_push-worklist_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-worklist_edge-cut bfs_push-worklist_edge-cut_cuda)
  cuda_add_library(bfs_push-worklist_edge-cut_cuda bfs_push-worklist/gen_cuda.cu)
  target_link_libraries(bfs_push-worklist_edge-cut_cuda ggrt)
endif()

app(bfs_push-filter_edge-cut bfs_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_push-filter_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-filter_edge-cut bfs_push-filter_edge-cut_cuda)
  cuda_add_library(bfs_push-filter_edge-cut_cuda bfs_push-filter/gen_cuda.cu)
  target_link_libraries(bfs_push-filter_edge-cut_cuda ggrt)
endif()

app(bfs_push-filter_vertex-cut bfs_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(bfs_push-filter_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(bfs_push-filter_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_push-filter_vertex-cut bfs_push-filter_vertex-cut_cuda)
  cuda_add_library(bfs_push-filter_vertex-cut_cuda bfs_push-filter/gen_cuda.cu)
  target_link_libraries(bfs_push-filter_vertex-cut_cuda ggrt)
endif()

app(bfs_pull-topological_edge-cut bfs_pull-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(bfs_pull-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_pull-topological_edge-cut bfs_pull-topological_edge-cut_cuda)
  cuda_add_library(bfs_pull-topological_edge-cut_cuda bfs_pull-topological/gen_cuda.cu)
  target_link_libraries(bfs_pull-topological_edge-cut_cuda ggrt)
endif()

app(bfs_pull-topological_vertex-cut bfs_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(bfs_pull-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(bfs_pull-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(bfs_pull-topological_vertex-cut bfs_pull-topological_vertex-cut_cuda)
  cuda_add_library(bfs_pull-topological_vertex-cut_cuda bfs_pull-topological/gen_cuda.cu)
  target_link_libraries(bfs_pull-topological_vertex-cut_cuda ggrt)
endif()

app(cc_push-topological_edge-cut cc_push-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_push-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-topological_edge-cut cc_push-topological_edge-cut_cuda)
  cuda_add_library(cc_push-topological_edge-cut_cuda cc_push-topological/gen_cuda.cu)
  target_link_libraries(cc_push-topological_edge-cut_cuda ggrt)
endif()

app(cc_push-topological_vertex-cut cc_push-topological/gen.cpp DISTSAFE)
target_compile_definitions(cc_push-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(cc_push-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-topological_vertex-cut cc_push-topological_vertex-cut_cuda)
  cuda_add_library(cc_push-topological_vertex-cut_cuda cc_push-topological/gen_cuda.cu)
  target_link_libraries(cc_push-topological_vertex-cut_cuda ggrt)
endif()

app(cc_push-worklist_edge-cut cc_push-worklist/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_push-worklist_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-worklist_edge-cut cc_push-worklist_edge-cut_cuda)
  cuda_add_library(cc_push-worklist_edge-cut_cuda cc_push-worklist/gen_cuda.cu)
  target_link_libraries(cc_push-worklist_edge-cut_cuda ggrt)
endif()

app(cc_push-filter_edge-cut cc_push-filter/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_push-filter_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-filter_edge-cut cc_push-filter_edge-cut_cuda)
  cuda_add_library(cc_push-filter_edge-cut_cuda cc_push-filter/gen_cuda.cu)
  target_link_libraries(cc_push-filter_edge-cut_cuda ggrt)
endif()

app(cc_push-filter_vertex-cut cc_push-filter/gen.cpp DISTSAFE)
target_compile_definitions(cc_push-filter_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(cc_push-filter_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_push-filter_vertex-cut cc_push-filter_vertex-cut_cuda)
  cuda_add_library(cc_push-filter_vertex-cut_cuda cc_push-filter/gen_cuda.cu)
  target_link_libraries(cc_push-filter_vertex-cut_cuda ggrt)
endif()

app(cc_pull-topological_edge-cut cc_pull-topological/gen.cpp DISTSAFE)
if(USE_GGC)
  target_compile_definitions(cc_pull-topological_edge-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_pull-topological_edge-cut cc_pull-topological_edge-cut_cuda)
  cuda_add_library(cc_pull-topological_edge-cut_cuda cc_pull-topological/gen_cuda.cu)
  target_link_libraries(cc_pull-topological_edge-cut_cuda ggrt)
endif()

app(cc_pull-topological_vertex-cut cc_pull-topological/gen.cpp DISTSAFE)
target_compile_definitions(cc_pull-topological_vertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
if(USE_GGC)
  target_compile_definitions(cc_pull-topological_vertex-cut PRIVATE __GALOIS_HET_CUDA__=1)
  target_link_libraries(cc_pull-topological_vertex-cut cc_pull-topological_vertex-cut_cuda)
  cuda_add_library(cc_pull-topological_vertex-cut_cuda cc_pull-topological/gen_cuda.cu)
  target_link_libraries(cc_pull-topological_vertex-cut_cuda ggrt)
endif()

#### Experiment ####
app(bfs_pull-topological_edgeAsvertex-cut bfs_pull-topological/gen_kGraph.cpp DISTSAFE)
app(bfs_pull-topological_mGraphVertex-cut bfs_pull-topological/gen_mGraph.cpp DISTSAFE)
target_compile_definitions(bfs_pull-topological_mGraphVertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)


app(bfs_push-topological_mGraphVertex-cut bfs_push-topological/gen_mGraph.cpp DISTSAFE)
target_compile_definitions(bfs_push-topological_mGraphVertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)
#target_compile_definitions(bfs_pull-topological_edgeAsvertex-cut PRIVATE __GALOIS_VERTEX_CUT_GRAPH__=1)

