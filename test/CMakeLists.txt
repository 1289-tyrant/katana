function(makeTest name)
  add_executable(test-${name} ${name}.cpp)
  target_link_libraries(test-${name} galois)
  add_test(${name} test-${name})
endfunction()

# XXX(ddn): Avoid internal compiler error
if(CMAKE_CXX_COMPILER_ID MATCHES "XL")
  set_source_files_properties(worklists-compile.cpp PROPERTIES COMPILE_FLAGS "-O0")
endif()

makeTest(acquire)
makeTest(bandwidth)
makeTest(barriers)
makeTest(empty-member-lcgraph)
makeTest(flatmap)
makeTest(gdeque)
makeTest(graph-compile)
makeTest(worklists-compile)
if(OPENMP_FOUND)
  makeTest(loopoverhead)
endif()
makeTest(pc)
makeTest(sched)
makeTest(sort)
makeTest(static)
makeTest(lock)
makeTest(twoleveliteratora)
makeTest(forward-declare-graph)
makeTest(lockmgr)
makeTest(lc-adaptor)
